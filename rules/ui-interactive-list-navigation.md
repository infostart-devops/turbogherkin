# Использование шагов интерактивной навигации в списках

При использовании шагов интерактивной навигации в списках, например, шага `И в таблице "Список" я перехожу к строке`, нужно явно устанавливать необходимый режим просмотра списка.

Если этого не делать, то работоспособность сценария будет зависеть от того, в каком исходном состоянии список будет открыт, а это в свою очередь может зависеть от действий, которые выполнялись в предыдущих сценариях в этом же сеансе клиента тестирования.

Если шаги навигации

## Пример 1. Использование явной установки режима просмотра списка

### ❌ Неправильно. 

```gherkin
    Когда открываю навигационную ссылку 'e1cib/data/Справочник.Товары'
    И в таблице "Список" я перехожу к строке
        | 'Наименование' |
        | 'Босоножки'    |
```

Если справочник содержит только один уровень иерархии, то такой шаг будет работать стабильно всегда. Но если справочник иерархический, то работоспособность шага будет зависеть от того, в каком состоянии откроется форма списка и от того, где находится наш элемент и от того, открывалась ли эта форма другими сценариями:

* если другие сценарии не использовали форму, сам справочник иерархический, и наш элемент находится в какой-то группе, то наш шаг упадет, т.к. по умолчанию список открывается в режиме просмотра Иерархия на первом уровне иерархии, и в таком случае поиск выполняется в пределах текущего уровня иерархии
* если какой-то сценарий установил режим просмотра "Список", то наш сценарий выполнится успешно независимо от уровня иерархии
* если какой-то сценарий наоборот установит режим просмотра "Иерархия", то наш сценарий упадет

Т.е. такая реализация хрупкая - сценарий будет неконтролируемо падать или успешно выполняться независимо от того, работает ли реально проверяемый функционал или нет.


### ✔️ Правильно

```gherkin
    Когда открываю навигационную ссылку 'e1cib/data/Справочник.Товары'
    И я нажимаю кнопку с именем "ФормаСписок"
    И в таблице "Список" я перехожу к строке
        | 'Наименование' |
        | 'Босоножки'    |
```

Здесь явным образом перед переходом к элементу включается режим просмотра "Список" и сценарий не будет зависеть от работы сценариев, которые использовали форму списка справочника "Товары" до нашего сценария.


## Пример 2. Отказ от навигации в пользу прямого открытия формы конкретного элемента

### ❌ Неправильно. 

```gherkin
	Когда в командном интерфейсе я выбираю "Продажи" "Контрагенты"
	И в таблице 'Список' я перехожу к строке:
		| "Наименование" |
		| "Покупатели" |    
	И в таблице 'Список' я выбираю текущую строку
	И в таблице 'Список' я перехожу к строке:
		| "Наименование" |
		| "Шлюзовая ООО" |
	И в таблице 'Список' я выбираю текущую строку
    Тогда открылось окно "Шлюзовая ООО (Контрагент)"
```

Тут навигация по списку (включая навигацию по иерархии!) выполняется только ради того, чтобы открыть форму конкретного элемента справочника. Это делает сценарий более хрупким, он начинает зависеть от состояния формы списка, хотя в данном случае в этой навигации нет никакой необходимости и можно открыть элемент по навигационной ссылке:

### ✔️ Правильно

```gherkin
    Когда открываю навигационную ссылку 'e1cib/data/Справочник.Контрагенты?ref=a9b000055d49b45e11db8c4c9d5c4234'
    Тогда открылось окно "Шлюзовая ООО (Контрагент)"
```

Тут сразу открываем нужный элемент - максимально стабильный шаг.